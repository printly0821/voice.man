---
id: SPEC-CRIME-CLASS-001
version: "1.0.0"
status: "planned"
created: "2026-01-10"
updated: "2026-01-10"
author: "지니"
priority: "HIGH"
---

# SPEC-CRIME-CLASS-001: 인수 기준서

## 1. 개요

본 문서는 SPEC-CRIME-CLASS-001(범죄 유형 분류 시스템)의 인수 기준 및 테스트 시나리오를 정의한다.

---

## 2. 인수 기준 (Acceptance Criteria)

### 2.1 기능적 인수 기준

#### AC1: 멀티모달 융합 분류 (F1)

```gherkin
Feature: 멀티모달 융합 범죄 분류
  As a 포렌식 분석가
  I want to 텍스트, 음성, 심리 점수를 융합하여 범죄 유형을 분류
  So that 다각도의 증거 기반 분류 결과를 얻을 수 있다

  Scenario: 기본 멀티모달 분류
    Given 텍스트 분석 결과가 존재하고
    And 음성 특성 분석 결과가 존재하고
    And 심리 프로파일이 존재할 때
    When 멀티모달 분류기를 실행하면
    Then 11개 범죄 유형에 대한 신뢰도 점수가 반환되어야 한다
    And 각 점수는 0.0에서 1.0 사이여야 한다
    And 모달리티별 기여도가 명시되어야 한다

  Scenario: 가중치 기반 앙상블
    Given 사기죄 관련 텍스트 점수가 0.8이고
    And 음성 점수가 0.7이고
    And 심리 점수가 0.6일 때
    When 사기죄 가중치(text=0.4, audio=0.35, psych=0.25)를 적용하면
    Then 최종 점수는 0.715 (±0.01) 이어야 한다

  Scenario: 복수 죄명 감지
    Given 발화에 사기와 공갈 패턴이 동시에 존재할 때
    When 멀티모달 분류기를 실행하면
    Then 사기와 공갈 모두 신뢰도 0.5 이상으로 분류되어야 한다
    And "복수 죄명 해당" 플래그가 설정되어야 한다
```

---

#### AC2: 확장 범죄 언어 패턴 (F2)

```gherkin
Feature: 확장 범죄 언어 패턴 감지
  As a 범죄 분석 시스템
  I want to 11개 죄명에 대한 언어 패턴을 감지
  So that 텍스트 기반 범죄 유형을 식별할 수 있다

  Scenario: 사기 패턴 감지
    Given 텍스트에 "돈 빌려주면 갚을게"가 포함되어 있을 때
    When 범죄 언어 패턴 분석을 실행하면
    Then 사기(FRAUD) 유형이 감지되어야 한다
    And 신뢰도가 0.7 이상이어야 한다

  Scenario: 공갈 패턴 감지
    Given 텍스트에 "돈 안 주면 폭로할거야"가 포함되어 있을 때
    When 범죄 언어 패턴 분석을 실행하면
    Then 공갈(EXTORTION) 유형이 감지되어야 한다
    And 협박(THREAT) 유형도 동시에 감지되어야 한다

  Scenario: 모욕 패턴 감지
    Given 텍스트에 경멸적 표현이 포함되어 있을 때
    When 범죄 언어 패턴 분석을 실행하면
    Then 모욕(INSULT) 유형이 감지되어야 한다
    And 감지된 비속어 목록이 반환되어야 한다

  Scenario: 횡령/배임 패턴 감지
    Given 텍스트에 "회사 돈으로 처리했어"가 포함되어 있을 때
    When 범죄 언어 패턴 분석을 실행하면
    Then 횡령(EMBEZZLEMENT) 또는 배임(BREACH_OF_TRUST)이 감지되어야 한다

  Scenario: 빈 텍스트 처리
    Given 빈 텍스트가 입력되었을 때
    When 범죄 언어 패턴 분석을 실행하면
    Then 모든 범죄 유형 점수가 0.0이어야 한다
    And 에러 없이 처리되어야 한다
```

---

#### AC3: 심리 프로파일링 (F3)

```gherkin
Feature: 심리 프로파일링
  As a 포렌식 심리 분석가
  I want to 텍스트와 음성에서 심리적 특성을 추출
  So that 범죄 성향을 예측할 수 있다

  Scenario: 다크 트라이어드 점수 계산
    Given 나르시시즘 지표가 포함된 텍스트가 있을 때
    When 심리 프로파일러를 실행하면
    Then 다크 트라이어드 점수(narcissism, machiavellianism, psychopathy)가 반환되어야 한다
    And 각 점수는 0.0에서 1.0 사이여야 한다

  Scenario: 애착 유형 분석
    Given 집착적 언어 패턴이 포함된 텍스트가 있을 때
    When 심리 프로파일러를 실행하면
    Then 애착 유형이 반환되어야 한다
    And 가능한 유형은 secure, anxious, avoidant, anxious_avoidant 중 하나여야 한다

  Scenario: 범죄 성향 예측
    Given 마키아벨리즘 점수가 0.8이고
    And 나르시시즘 점수가 0.7일 때
    When 범죄 성향 예측을 실행하면
    Then 사기(fraud) 성향이 높게 예측되어야 한다
    And 가스라이팅(gaslighting) 성향도 높게 예측되어야 한다
```

---

#### AC4: 법적 증거 매핑 (F4)

```gherkin
Feature: 법적 증거 매핑
  As a 법률 전문가
  I want to 분석 결과를 형법 구성요건에 매핑
  So that 법적 요건 충족 여부를 판단할 수 있다

  Scenario: 사기죄 구성요건 매핑
    Given 사기 유형으로 분류된 발화가 있을 때
    When 법적 증거 매핑을 실행하면
    Then 형법 제347조가 참조되어야 한다
    And 구성요건(기망행위, 착오유발, 처분행위, 재산상이익, 인과관계)에 대한 충족 여부가 반환되어야 한다

  Scenario: 구성요건 충족률 계산
    Given 5개 구성요건 중 4개가 충족되었을 때
    When 충족률을 계산하면
    Then 충족률은 0.8 (80%)이어야 한다
    And 법적 실행 가능성은 "보통" 또는 "높음"이어야 한다

  Scenario: 충족되지 않은 요건 식별
    Given 일부 구성요건이 충족되지 않았을 때
    When 법적 증거 매핑을 실행하면
    Then 충족되지 않은 요건 목록이 반환되어야 한다
    And 각 요건에 대한 추가 증거 필요 여부가 표시되어야 한다

  Scenario: 형법 조문 자동 참조
    Given 협박 유형으로 분류되었을 때
    When 법적 참조를 조회하면
    Then "형법 제283조"가 반환되어야 한다
    And 해당 조문의 내용이 포함되어야 한다
```

---

#### AC5: 신뢰 구간 계산 (F5)

```gherkin
Feature: 신뢰 구간 계산
  As a 통계 분석가
  I want to 분류 결과에 대한 95% 신뢰 구간을 계산
  So that 결과의 통계적 신뢰성을 제시할 수 있다

  Scenario: 95% 신뢰 구간 계산
    Given 분류 신뢰도가 0.78일 때
    When 신뢰 구간을 계산하면
    Then 하한 (lower_95)과 상한 (upper_95)이 반환되어야 한다
    And 점 추정치는 0.78이어야 한다
    And 하한은 점 추정치보다 낮아야 한다
    And 상한은 점 추정치보다 높아야 한다

  Scenario: 불확실성 수준 판정
    Given 신뢰 구간 폭이 0.1 이하일 때
    Then 불확실성 수준은 "낮음"이어야 한다

    Given 신뢰 구간 폭이 0.2 이상일 때
    Then 불확실성 수준은 "높음"이어야 한다
```

---

#### AC6: 검찰 제출 포맷 생성 (F6)

```gherkin
Feature: 검찰 제출 포맷 생성
  As a 고소인
  I want to 검찰 제출용 증거 보고서를 생성
  So that 표준 형식의 법적 문서를 제출할 수 있다

  Scenario: PDF 보고서 생성
    Given 범죄 분류 결과가 존재할 때
    When 검찰 제출 보고서를 생성하면
    Then PDF 파일이 생성되어야 한다
    And 표지, 목차, 본문, 부록이 포함되어야 한다

  Scenario: 죄명별 증거 요약 포함
    Given 사기와 공갈로 분류된 결과가 있을 때
    When 보고서를 생성하면
    Then 사기죄 증거 요약 섹션이 포함되어야 한다
    And 공갈죄 증거 요약 섹션이 포함되어야 한다
    And 각 섹션에 해당 형법 조문이 명시되어야 한다

  Scenario: 시계열 분석 포함
    Given 여러 녹취 파일의 분석 결과가 있을 때
    When 보고서를 생성하면
    Then 범죄 행위 타임라인이 포함되어야 한다
    And 에스컬레이션 패턴이 시각화되어야 한다

  Scenario: 면책 조항 포함
    Given 보고서를 생성할 때
    Then 법적 조언이 아님을 명시하는 면책 조항이 포함되어야 한다
```

---

### 2.2 비기능적 인수 기준

#### AC7: 성능 요구사항

```gherkin
Feature: 성능 요구사항
  As a 시스템 관리자
  I want to 시스템이 적절한 성능으로 동작
  So that 대량 파일을 효율적으로 처리할 수 있다

  Scenario: 단일 파일 분류 시간
    Given 60초 길이의 오디오 파일이 있을 때
    When 전체 분류 파이프라인을 실행하면
    Then 분류가 30초 이내에 완료되어야 한다

  Scenario: 배치 처리 성능
    Given 183개 녹취 파일이 있을 때
    When 배치 분류를 실행하면
    Then 전체 처리가 3시간 이내에 완료되어야 한다

  Scenario: 메모리 사용량
    Given 분류 파이프라인이 실행 중일 때
    Then GPU 메모리 사용량이 8GB를 초과하지 않아야 한다
```

---

#### AC8: 정확도 요구사항

```gherkin
Feature: 정확도 요구사항
  As a 품질 관리자
  I want to 분류 정확도가 기준을 충족
  So that 법적 증거로서 신뢰할 수 있다

  Scenario: 패턴 매칭 정확도
    Given 수동 레이블링된 테스트 세트가 있을 때
    When 패턴 매칭을 실행하면
    Then 정확도가 95% 이상이어야 한다

  Scenario: 범죄 분류 정확도
    Given 수동 레이블링된 테스트 세트가 있을 때
    When 멀티모달 분류를 실행하면
    Then Top-1 정확도가 80% 이상이어야 한다
    And Top-3 정확도가 95% 이상이어야 한다

  Scenario: 법적 매핑 정확도
    Given 법률 전문가가 검토한 테스트 세트가 있을 때
    When 법적 증거 매핑을 실행하면
    Then 구성요건 충족 판정 정확도가 85% 이상이어야 한다
```

---

#### AC9: 일관성 요구사항 (U1, U2)

```gherkin
Feature: 분류 일관성
  As a 법적 증거 생성자
  I want to 동일 입력에 대해 동일 결과 보장
  So that 분석 결과를 재현할 수 있다

  Scenario: 결정론적 분류
    Given 동일한 오디오 파일과 텍스트가 있을 때
    When 분류를 10회 반복 실행하면
    Then 모든 결과가 동일해야 한다

  Scenario: 모달리티 기여도 추적
    Given 분류 결과가 생성되었을 때
    Then 텍스트 점수, 음성 점수, 심리 점수가 모두 기록되어야 한다
    And 각 모달리티의 가중치가 명시되어야 한다
```

---

#### AC10: 법적 준수 요구사항 (U3, N1, N2)

```gherkin
Feature: 법적 준수
  As a 법률 준수 담당자
  I want to 시스템이 법적 요구사항을 준수
  So that 법적 위험을 방지할 수 있다

  Scenario: 형법 조문 자동 참조
    Given 범죄 유형이 분류되었을 때
    Then 해당 형법 조문이 자동으로 참조되어야 한다
    And 조문 번호와 내용이 정확해야 한다

  Scenario: 법적 조언 금지 (N1)
    Given 보고서가 생성되었을 때
    Then "이 결과는 법적 조언이 아닙니다" 면책 조항이 포함되어야 한다
    And "법률 전문가 검토 필요" 문구가 포함되어야 한다

  Scenario: 개인정보 보호 (N2)
    Given 분석 결과가 저장될 때
    Then 화자 ID는 익명화(SPEAKER_00, SPEAKER_01)되어야 한다
    And 개인정보는 마스킹되어야 한다
```

---

## 3. 테스트 시나리오

### 3.1 단위 테스트

| 테스트 ID | 테스트 대상 | 테스트 설명 | 예상 결과 |
|-----------|-------------|-------------|-----------|
| UT-001 | extended_crime_patterns.py | 사기 패턴 매칭 | 정확도 95% 이상 |
| UT-002 | extended_crime_patterns.py | 공갈 패턴 매칭 | 정확도 95% 이상 |
| UT-003 | extended_crime_patterns.py | 모욕 패턴 매칭 | 정확도 95% 이상 |
| UT-004 | psychological_profiler.py | 다크 트라이어드 계산 | 점수 0-1 범위 |
| UT-005 | psychological_profiler.py | 애착 유형 분류 | 4가지 유형 중 하나 |
| UT-006 | legal_evidence_mapper.py | 구성요건 매핑 | 정확도 85% 이상 |
| UT-007 | confidence_calculator.py | 신뢰 구간 계산 | 수학적 정확성 |
| UT-008 | multimodal_classifier.py | 가중 앙상블 | 가중치 적용 정확 |

### 3.2 통합 테스트

| 테스트 ID | 테스트 대상 | 테스트 설명 | 예상 결과 |
|-----------|-------------|-------------|-----------|
| IT-001 | 전체 파이프라인 | 포렌식 분석 → 범죄 분류 | 자동 트리거 성공 |
| IT-002 | 전체 파이프라인 | 분류 → 법적 매핑 | 매핑 완료 |
| IT-003 | 전체 파이프라인 | 분류 → 보고서 생성 | PDF 생성 성공 |
| IT-004 | API | 모든 엔드포인트 | 정상 응답 |

### 3.3 검증 데이터셋

| 데이터셋 | 설명 | 파일 수 |
|----------|------|---------|
| 신기연_테스트 | 신기연 고소장 관련 녹취 | TBD |
| 신동식_테스트 | 신동식 고소장 관련 녹취 | TBD |
| 수동_레이블 | 전문가 레이블링 테스트 세트 | 50개 이상 |

---

## 4. 품질 게이트

### 4.1 코드 품질

- 테스트 커버리지: 85% 이상
- 린터 경고: 0개
- 보안 취약점: 0개 (HIGH/CRITICAL)

### 4.2 문서화

- API 문서화: 100%
- 코드 주석: 주요 함수 100%
- 사용자 가이드: 완료

### 4.3 성능

- 단일 파일 처리: 30초 이내
- 배치 처리: 1시간 당 60파일 이상
- GPU 메모리: 8GB 이내

---

## 5. Definition of Done

### 5.1 Phase 1 완료 기준

- [ ] 11개 죄명 언어 패턴 DB 완성 (최소 200개 패턴)
- [ ] 텍스트 기반 분류기 구현 완료
- [ ] 단위 테스트 통과 (UT-001 ~ UT-003)
- [ ] 패턴 매칭 정확도 95% 이상

### 5.2 Phase 2 완료 기준

- [ ] 심리 프로파일러 구현 완료
- [ ] 다크 트라이어드 점수 계산 검증
- [ ] 단위 테스트 통과 (UT-004 ~ UT-005)

### 5.3 Phase 3 완료 기준

- [ ] 한국 형법 DB 구축 완료
- [ ] 법적 증거 매핑 서비스 구현 완료
- [ ] 신뢰 구간 계산기 구현 완료
- [ ] 단위 테스트 통과 (UT-006 ~ UT-007)

### 5.4 Phase 4 완료 기준

- [ ] 멀티모달 앙상블 분류기 통합 완료
- [ ] 검찰 제출 포맷 생성기 구현 완료
- [ ] 통합 테스트 통과 (IT-001 ~ IT-004)
- [ ] 전체 파이프라인 검증 완료
- [ ] 성능 요구사항 충족

---

## 6. 추적성

### 6.1 요구사항-테스트 매핑

| 요구사항 ID | 테스트 ID | 상태 |
|-------------|-----------|------|
| F1 | UT-008, IT-001 | 계획됨 |
| F2 | UT-001, UT-002, UT-003 | 계획됨 |
| F3 | UT-004, UT-005 | 계획됨 |
| F4 | UT-006 | 계획됨 |
| F5 | UT-007 | 계획됨 |
| F6 | IT-003 | 계획됨 |
| U1 | AC9 | 계획됨 |
| U2 | AC9 | 계획됨 |
| U3 | AC10 | 계획됨 |
| N1 | AC10 | 계획됨 |
| N2 | AC10 | 계획됨 |

### 6.2 태그

```
[SPEC-CRIME-CLASS-001] [인수기준]
[AC1-AC10] [테스트시나리오]
[품질게이트] [DoD]
```

---

**문서 끝**
